{
  "comments":[
    {
      "comment":"\r\nIssue Type: <b>Bug</b>\r\n\r\n1. open Release Notes\r\n2. press alt to open the file menu\r\n\r\n## what's happening.\r\n\r\nmenu dosn't opens.\r\n\r\n## what should happen.\r\n\r\nmenu opens, focus moves\r\n\r\nVS Code version: Code - Insiders 1.48.0-insider (2277c8e2a3e1cc630a6397301ba54a1dccd8a60d, 2020-08-07T11:32:09.993Z)\r\nOS version: Windows_NT x64 10.0.19042\r\n\r\n<details>\r\n<summary>System Info</summary>\r\n\r\n|Item|Value|\r\n|---|---|\r\n|CPUs|Intel(R) Core(TM) i7-7700K CPU @ 4.20GHz (8 x 4200)|\r\n|GPU Status|2d_canvas: enabled<br>flash_3d: enabled<br>flash_stage3d: enabled<br>flash_stage3d_baseline: enabled<br>gpu_compositing: enabled<br>multiple_raster_threads: enabled_on<br>oop_rasterization: disabled_off<br>protected_video_decode: enabled<br>rasterization: enabled<br>skia_renderer: disabled_off_ok<br>video_decode: enabled<br>viz_display_compositor: enabled_on<br>viz_hit_test_surface_layer: disabled_off_ok<br>webgl: enabled<br>webgl2: enabled|\r\n|Load (avg)|undefined|\r\n|Memory (System)|15.86GB (7.90GB free)|\r\n|Process Argv||\r\n|Screen Reader|yes|\r\n|VM|25%|\r\n</details><details><summary>Extensions (22)</summary>\r\n\r\nExtension|Author (truncated)|Version\r\n---|---|---\r\ngithub-markdown-preview|bie|0.0.2\r\nmarkdown-checkbox|bie|0.1.3\r\nmarkdown-emoji|bie|0.0.9\r\nmarkdown-preview-github-styles|bie|0.1.6\r\nmarkdown-yaml-preamble|bie|0.0.4\r\nvscode-astyle|chi|0.9.0\r\nvscode-markdownlint|Dav|0.36.2\r\ngithistory|don|0.6.9\r\nEditorConfig|Edi|0.15.1\r\nvscode-pull-request-github|Git|0.18.1\r\nvscode-language-pack-ru|MS-|1.48.2\r\npython|ms-|2020.7.96456\r\nremote-ssh|ms-|0.51.0\r\nremote-ssh-edit|ms-|0.51.0\r\nremote-wsl|ms-|0.44.4\r\ncmake-tools|ms-|1.4.1\r\ncpptools|ms-|0.29.0\r\nvsliveshare|ms-|1.0.2478\r\nvsliveshare-audio|ms-|0.1.85\r\nvsliveshare-pack|ms-|0.4.0\r\ncode-spell-checker|str|1.9.0\r\ncode-spell-checker-russian|str|0.2.4\r\n\r\n\r\n</details>\r\n<!-- generated by issue reporter -->",
      "user":"alex19EP"
    },
    {
      "comment":"I can reproduce this - just open any markdown preview and `alt+f` will not open the file menu. \r\nI think we should fix this for this release, as it is a breaking change (in last stable I can nicely press `alt+f` to open the file menu). Due to that I am assigning this to July and @mjbvz can move it out if he would prefer to fix it next milestone\r\n\r\nAlso fyi @sbatten for custom menus",
      "user":"isidorn"
    },
    {
      "comment":"@sbatten Has the way the menus handle mnemonics changed this iteration? The webview still seem to be dispatching the events but they aren't being handled by anyone",
      "user":"mjbvz"
    },
    {
      "comment":"@mjbvz nope no changes that i know of",
      "user":"sbatten"
    },
    {
      "comment":"should be handled here https://github.com/microsoft/vscode/blob/4a1bcdafe97820778ba86f40c225dbb40585c8f0/src/vs/base/browser/ui/menu/menubar.ts#L1020",
      "user":"sbatten"
    },
    {
      "comment":"`alt+f` is working for me and @sbatten in insiders on windows. \r\n\r\nFor just pressing `alt` to show the mnemonics, this does not seem like a regression from 1.47 in my testing but it was working in 1.46",
      "user":"mjbvz"
    },
    {
      "comment":"I was just testing this out, I see no new behavioral differences between now and 1.46\r\n\r\n1. Alt does not focus the custom menubar with release notes focused. We do not get the alt event\r\n2. Alt+<mnemonic> does open the resepective menu with release notes focused.",
      "user":"sbatten"
    },
    {
      "comment":"hay @sbatten \r\n\r\n> 1. Alt does not focus the custom menubar with release notes focused. We do not get the alt event\r\n\r\ncan we fix that? because it's really strange in my opinion.",
      "user":"alex19EP"
    },
    {
      "comment":"@sbatten Changing the listeners from using `document.body` to `window` fixes the initial trigger, but keys like `esc` don't clear the focus. Moving out to look into a better fix",
      "user":"mjbvz"
    },
    {
      "comment":"@mjbvz is there something webviews need to do to have keys passed back to VS Code? This came up at https://github.com/flutter/devtools/issues/2775 and I can repro in both stable and insiders. The webview hosts an iframe if that matters. I'm unable to interact with VS Code (eg. to open command palette) when focus is in the web view.\r\n\r\nI tried loading a non-Flutter page in there to check it wasn't specific to Flutter, but it's happening with other pages too.",
      "user":"DanTup"
    },
    {
      "comment":"If you can avoid it, don't use an iframe.\r\n\r\nIf you absolutely must use an iframe, then you need to dispatch the keypresses back to webviews. See https://github.com/microsoft/vscode/issues/65452#issuecomment-586036474 ",
      "user":"mjbvz"
    },
    {
      "comment":"@mjbvz I don't think there's any way to avoid the iframe really. The linked solution didn't work due to CORS issues, but the comments further down using postMessage to bounce the events over does. I'll see whether we can get something like that in the embedded app. Thanks!",
      "user":"DanTup"
    }
  ],
  "repository":"vscode",
  "user":"alex19EP"
}